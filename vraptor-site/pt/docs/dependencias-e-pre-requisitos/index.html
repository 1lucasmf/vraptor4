<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>VRaptor 4 - Dependências e pré requisitos</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/custom-highlight.css" />    
     
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.7">
  </head>

  <body>
    <div id="main" class="highlight">
      <div id="header">
        <a id="logo" href="/pt"><img src="/logo.png"></a>
        <span>Framework Java MVC</span>
      </div>
      <p>O VRaptor 4 depende do JDK 1.7 e do CDI 1.1, portanto só funcionará nos servidores que suportem essa versão do CDI.
Os servidores já testados e suportados são:
- Glassfish 4
- WildFly 8.0
- Tomcat 7 (+ jars do Weld 2.0)
- Jetty 8  (+ jars do Weld 2.0)</p>

<blockquote>
  <p>O Wildfly possui uma restrição para a classe <code>MutableResponse</code>. Para contornar isso você precisa adicionar o seguinte parâmetro no arquivo <code>standalone.xml</code> na tag <code>servlet-container</code> do subsystem <code>undertown</code>:</p>
</blockquote>

<pre><code class="language-xml">allow-non-standard-wrappers="true"</code></pre>

<h3 id="maven">Maven</h3>

<p>O VRaptor 4 usa como padrão o Maven para gerenciar as dependências. Com isso basta você adicionar o artefato do vraptor como dependência, e o Maven irá se encarregar de fazer o download de todas as dependências.</p>

<pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>br.com.caelum<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>vraptor<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>4.0.0<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!--or the latest version--&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>

<p>A estrutura do projeto baseado no Maven é um pouco diferente da estrutura convencional usada pelas IDEs. No entanto quando o projeto é empacotado, o Maven irá gerar a estrutura padrão de um WAR.</p>

<pre><code>Local Maven           Descrição                            Local no pacote WAR
src/main/java         fontes Java                          /WEB-INF/classes
src/main/resources    arquivos de configuração             /WEB-INF/classes
src/main/webapp       arquivos web                         /
src/test/java         fontes Java para testes              - ignorado -
src/test/resources    arquivos de config. para testes      - ignorado -
</code></pre>

<p>Se você não quiser usar o Maven, basta criar um projeto em branco na sua IDE preferida e adicionar o jar do VRaptor com as dependências.</p>

<h3 id="logging">Logging</h3>

<p>Utilizamos o SLF4J (Simple Logging Facade for Java) para imprimir os logs dos eventos internos. SLF4J pode direcionar o logging para vários frameworks de logging como NOP, Simple, log4j e JDK Logging. Para configurar o logging você precisa adicionar no seu classpath o jar <code>slf4j-api.jar</code> juntamente com o jar de binding que você escolher. Veja mais sobre o assunto na <a href="http://www.slf4j.org/manual.html">documentação do SLF4J</a>.</p>

<p>A maioria dos projetos preferem usar o <em>log4j</em> como implementação de logging. Caso você queira usá-lo, basta adicionar nas dependências do projeto o seguinte artefato:</p>

<pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.7.5<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- ou a última versão disponível --&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>

<p>Incluir um arquivo de configuração chamado <code>log4j.xml</code> na pasta de <code>src/main/resources</code> do projeto, por exemplo:</p>

<pre><code class="language-xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="cp">&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;</span>
<span class="nt">&lt;log4j:configuration</span> <span class="na">xmlns:log4j=</span><span class="s">"http://jakarta.apache.org/log4j/"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"stdout"</span> <span class="na">class=</span><span class="s">"org.apache.log4j.ConsoleAppender"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"org.apache.log4j.PatternLayout"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"ConversionPattern"</span> <span class="na">value=</span><span class="s">"%d{HH:mm:ss,SSS} %5p [%-20c{1}] %m%n"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
    <span class="nt">&lt;category</span> <span class="na">name=</span><span class="s">"br.com.caelum.vraptor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;priority</span> <span class="na">value=</span><span class="s">"DEBUG"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"stdout"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/category&gt;</span>
    <span class="c">&lt;!-- incluir outras definições aqui --&gt;</span>
<span class="nt">&lt;/log4j:configuration&gt;</span></code></pre>

<h3 id="xstream-e-gson">XStream e Gson</h3>

<p>São utililizadas para serialização e deserialização XML e JSON respectivamente. Ambas são opcionais. Ou seja, se você não usar os recursos de serialização e deserialização, você pode removê-los do classpath.</p>

<p>Para XStream:</p>

<pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.thoughtworks.xstream<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>xstream<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.4.4<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>

<p>E para o Gson</p>

<pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.google.code.gson<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>gson<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.2.4<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>

<h3 id="bean-validation">Bean Validation</h3>

<p>Necessário para utilizar a funcionalidade de validação. Você precisará adicionar a API <code>validation-api</code> e alguma implementação, como por exemplo, o <a href="http://www.hibernate.org/subprojects/validator.html">Hibernate Validator</a> ou o <a href="https://bval.apache.org/">Apache BVal</a>.</p>

<p>Se você usa um servidor de aplicações não é necessário adicionar a dependência do Bean Validation, pois já está incluído no Java EE 7.</p>

<h3 id="paranamer">Paranamer</h3>

<p>Infelizmente, o Java não realiza reflection de parâmetros em métodos e construtores, pois esses dados não ficam disponíveis em bytecode (a não ser se compilado em <strong>debug mode</strong>, porém é algo opcional). Isso faz com que a maioria dos frameworks que precisem desse tipo de informação criem uma anotação própria para isso, o que polui muito o código (exemplo no JAX-WS, onde é comum encontrar um método como o acima com a assinatura <code>void add(@WebParam(name="cliente") Cliente cliente)</code>. </p>

<p>O VRaptor tira proveito do framework <a href="http://paranamer.codehaus.org/">Paranamer</a>, que consegue tirar essa informação por meio da pré compilação ou dos dados de debug, evitando criar mais uma anotação. Alguns dos desenvolvedores do VRaptor também participam no desenvolvimento do <strong>Paranamer</strong>.</p>

<h3 id="commons-fileupload">Commons-fileupload</h3>

<p>Dependência opcional utilizada apenas se sua aplicação possui funcionalidade de upload de arquivos. Para adicionar o <code>commons-fileupload</code> é necessário adicionar também o <code>commons-io</code> no classpath.</p>

<pre><code class="language-xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>commons-fileupload<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>commons-fileupload<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>
    </div>
    <div id="sidebar">
      <ul>
        <li><a href="/pt/docs/guia-de-1-minuto">Guia inicial de 1 minuto</a></li>
        <li><a href="/pt/docs/guia-de-10-minutos">Guia inicial de 10 minutos</a></li>
        <li><a href="/pt/docs/controllers-rest">Controllers Rest</a></li>
        <li><a href="/pt/docs/components">Components</a></li>
        <li><a href="/pt/docs/conversores">Conversores</a></li>
        <li><a href="/pt/docs/validacao">Validação</a></li>
        <li><a href="/pt/docs/interceptadores">Interceptadores</a></li>
        <li><a href="/pt/docs/trabalhando-com-a-view">Trabalhando com a View</a></li>
        <li><a href="/pt/docs/download-e-upload">Download e Upload</a></li>
        <li><a href="/pt/docs/environment">Environment</a></li>
        <li><a href="/pt/docs/plugins">Plugins</a></li>
        <li><a href="/pt/docs/dependencias-e-pre-requisitos">Dependências e pré requisitos</a></li>
        <li><a href="/pt/docs/migrando-um-projeto-com-vraptor3">Migrando um projeto com VRaptor 3</a></li>
        <li><a href="/pt/docs/contribuindo-com-o-vraptor">Contribuindo com o VRaptor</a></li>
      </ul>
    </div>
  </body>
</html>
